###############################################################################
# Node.js API Monitoring Configuration
###############################################################################

# Define the Node.js API host
define host {
    use                     linux-server
    host_name               nodejs-api
    alias                   Node.js Hello API
    address                 nodejs-hello-api
    max_check_attempts      5
    check_period            24x7
    notification_interval   30
    notification_period     24x7
}

# Define HTTP service check for API health endpoint
define service {
    use                     generic-service
    host_name               nodejs-api
    service_description     API Health Check
    check_command           check_http!-p 3000 -u /health
    max_check_attempts      3
    check_interval          1
    retry_interval          1
    notification_interval   30
    notification_period     24x7
}

# Define HTTP service check for API hello endpoint
define service {
    use                     generic-service
    host_name               nodejs-api
    service_description     API Hello Endpoint
    check_command           check_http!-p 3000 -u /api/hello -s "Hello"
    max_check_attempts      3
    check_interval          2
    retry_interval          1
    notification_interval   30
    notification_period     24x7
}

# Define HTTP service check for API response time
define service {
    use                     generic-service
    host_name               nodejs-api
    service_description     API Response Time
    check_command           check_http!-p 3000 -u /health -w 1000 -c 2000
    max_check_attempts      3
    check_interval          2
    retry_interval          1
    notification_interval   30
    notification_period     24x7
}
